<?xml version="1.0" encoding="utf-8" ?>  
<CodeSnippets  xmlns="https://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">  
<_locDefinition xmlns="urn:locstudio">  
    <_locDefault _loc="locNone" />  
    <_locTag _loc="locData">Title</_locTag>  
    <_locTag _loc="locData">Description</_locTag>  
    <_locTag _loc="locData">Micael Uthas</_locTag>  
    <_locTag _loc="locData">ToolTip</_locTag>  
   <_locTag _loc="locData">Default</_locTag>  
</_locDefinition>  
<CodeSnippet Format="1.0.0">  
<Header>  
<Title>Create Table Function</Title>  
                        <Shortcut>CreateTFN</Shortcut>  
<Description>Creates a Table UDEF</Description>  
<Author>Micael Uthas</Author>  
<SnippetTypes>  
                                <SnippetType>SurroundsWith</SnippetType>  
</SnippetTypes>  
</Header>  
<Snippet>  
<Declarations>  
  <Literal>  
    <ID>UDEFName</ID>  
    <ToolTip>Name of the UDEF</ToolTip>  
    <Default>TFN_REPLACE</Default>  
  </Literal>
  <Literal>
    <ID>Micael Uthas</ID>
    <ToolTip>Name of author</ToolTip>
    <Default>Micael Uthas</Default>
  </Literal>
  <Literal>
    <ID>column1</ID>
    <ToolTip>Name of the column</ToolTip>
    <Default>column_1</Default>
  </Literal>
  <Literal>
    <ID>datatype1</ID>
    <ToolTip>Data type of the column</ToolTip>
    <Default>nvarchar(50) = null</Default>
  </Literal>
  <Literal>
    <ID>column2</ID>
    <ToolTip>Name of the column</ToolTip>
    <Default>column_2</Default>
  </Literal>
  <Literal>
    <ID>datatype2</ID>
    <ToolTip>Data type of the column</ToolTip>
    <Default>nvarchar(50) = null</Default>
  </Literal>
  <Literal>
    <ID>text</ID>
    <ToolTip>Grouping text</ToolTip>
    <Default>Text</Default>
  </Literal>
  <Literal>
    <ID>Action</ID>
    <ToolTip>Beginning of procedure</ToolTip>
    <Default>Select 'Action'</Default>
  </Literal>
</Declarations>  
<Code Language="SQL">
  <![CDATA[if not exists(select 1 from sys.objects where name = '$UDEFName$')
	exec sp_executesql N'Create function [dbo].[$UDEFName$]() returns @ValueTable table ([Value] nvarchar(Max)) As Begin return end'
go

Set ANSI_NULLS ON
GO
Set QUOTED_IDENTIFIER ON
GO
/*
Select * from $UDEFName$
(
 '0'
, '0'
, '0'
)
------------------------------------------------------------------------------------------------------
   Description: 
   Created by: $author$
  
   Changes
   Sign     Date      Comment
  
------------------------------------------------------------------------------------------------------
*/
Alter Function [dbo].[$UDEFName$]
(
  @Param1          nvarchar(50)
  , @Param2          nvarchar(50)
  , @Param3          nvarchar(50)
)
returns @ValueTable table ([Value] nvarchar(Max))
Begin

DECLARE
  -----------------------------------
  ---          $text$           ---
  -----------------------------------  
   @$column1$          $datatype1$
  ,@$column2$          $datatype2$
  -----------------------------------
  ---            Code             ---
  -----------------------------------
  
  Return
End
]]>  
</Code>  
</Snippet>  
</CodeSnippet>  
</CodeSnippets>  